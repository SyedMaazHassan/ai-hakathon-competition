{% extends "core/new_base.html" %}
{% load static %}

{% block title %}Job Details | Hire With AI{% endblock %}
{% block current_page %}Jobs{% endblock %}
{% block page_title %}Job Details{% endblock %}
{% block page_subtitle %}View job posting and candidates information{% endblock %}

{% block extra_head %}
<style>
  .hover-elevate {
    transition: all 0.2s ease-in-out;
  }
  .hover-elevate:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
  .text-page-title {
    font-size: 2rem;
    font-weight: 700;
    line-height: 1.2;
  }
  .text-card-title {
    font-size: 1.25rem;
    font-weight: 600;
  }
  .text-body-large {
    font-size: 1.125rem;
    line-height: 1.7;
  }
  .text-caption {
    font-size: 0.75rem;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
  .bg-success-subtle {
    background-color: rgba(34, 197, 94, 0.1);
    color: rgb(34, 197, 94);
    border-color: rgba(34, 197, 94, 0.2);
  }
  .bg-warning-subtle {
    background-color: rgba(245, 158, 11, 0.1);
    color: rgb(245, 158, 11);
    border-color: rgba(245, 158, 11, 0.2);
  }
  .bg-info-subtle {
    background-color: rgba(59, 130, 246, 0.1);
    color: rgb(59, 130, 246);
    border-color: rgba(59, 130, 246, 0.2);
  }
  .text-success {
    color: rgb(34, 197, 94);
  }
  .text-warning {
    color: rgb(245, 158, 11);
  }
  .text-info {
    color: rgb(59, 130, 246);
  }
  .text-destructive {
    color: rgb(239, 68, 68);
  }
  .bg-success {
    background-color: rgb(34, 197, 94);
  }
  .bg-warning {
    background-color: rgb(245, 158, 11);
  }
  .bg-info {
    background-color: rgb(59, 130, 246);
  }
  .bg-destructive {
    background-color: rgb(239, 68, 68);
  }
  .progress-bar {
    height: 8px;
    background-color: rgb(229, 231, 235);
    border-radius: 4px;
    overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    background-color: rgb(59, 130, 246);
    transition: width 0.3s ease;
  }
  /* Dark mode adjustments */
  .dark .hover-elevate:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
  }
  .dark .progress-bar {
    background-color: #374151; /* gray-700 */
  }
</style>
{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto p-6 space-y-6">
  <!-- Enhanced Header -->
  <div class="space-y-4">
    <div class="flex items-center gap-4">
      <a href="{% url 'jobs:jobs_list' %}">
          <button class="w-9 h-9 inline-flex items-center justify-center rounded-md border border-gray-300 hover:bg-gray-50 transition-colors dark:border-dark-border dark:hover:bg-dark-hover dark:text-dark-text">
          <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m12 19-7-7 7-7"/>
            <path d="M19 12H5"/>
          </svg>
        </button>
      </a>
      <div class="flex-1">
        <div class="flex items-center gap-3 mb-2">
          <h1 class="text-page-title dark:text-dark-text">{{ job.parsed_detailed.title|default:"Job" }}</h1>
          <span class="px-3 py-1 text-sm font-medium rounded-full border text-success bg-success-subtle dark:bg-green-900 dark:text-green-300 dark:border-green-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3 mr-1 inline" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
            </svg>
            Excellent Match
          </span>
        </div>
        <div class="flex items-center gap-4 text-gray-600 dark:text-gray-400">
          <div class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/>
            </svg>
            <span class="font-medium dark:text-dark-text">{{ job.parsed_detailed.company.name|default:"Company Name" }}</span>
          </div>
          <div class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"/>
              <circle cx="12" cy="10" r="3"/>
            </svg>
            {% with loc=job.parsed_detailed.location_requirements %}
              <span class="dark:text-dark-text">{{ loc.city }}, {{ loc.country }}</span>
            {% endwith %}
          </div>
        </div>
      </div>
    </div>

    <!-- Key Highlights Bar -->
    <div class="bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl border border-blue-200 dark:from-dark-card dark:to-dark-card dark:border-dark-border">
      <div class="p-4">
        <div class="flex flex-wrap items-center gap-4">
          <span class="px-3 py-1 text-sm font-medium rounded-full border bg-success-subtle dark:bg-green-900 dark:text-green-300 dark:border-green-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3 mr-1 inline" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect width="20" height="14" x="2" y="5" rx="2"/>
              <line x1="2" x2="22" y1="10" y2="10"/>
            </svg>
            {{ job.parsed_detailed.employment_type|default:"Full Time" }}
          </span>
          <span class="px-3 py-1 text-sm font-medium rounded-full border bg-warning-subtle dark:bg-yellow-900 dark:text-yellow-300 dark:border-yellow-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3 mr-1 inline" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
            </svg>
            {{ job.parsed_detailed.seniority|default:"Mid-Level" }}
          </span>
          <span class="px-3 py-1 text-sm font-medium rounded-full border border-gray-300 dark:border-dark-border dark:text-dark-text dark:bg-dark-hover">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3 mr-1 inline" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 3h18v14H3z"/>
              <path d="M8 21h8"/>
              <path d="M12 17v4"/>
            </svg>
            {{ job.parsed_detailed.work_location_type|default:"On-site" }}
          </span>
          {% with exp=job.parsed_detailed.experience %}
            {% if exp.min_years_total %}
              <span class="px-3 py-1 text-sm font-medium rounded-full border border-gray-300 dark:border-dark-border dark:text-dark-text dark:bg-dark-hover">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-3 h-3 mr-1 inline" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"/>
                  <polyline points="12 6 12 12 16 14"/>
                </svg>
                {{ exp.min_years_total }}+ years required
              </span>
            {% endif %}
          {% endwith %}
        </div>
      </div>
    </div>
  </div>

  <div class="grid grid-cols-1 xl:grid-cols-4 gap-6">
    <!-- Main Content - Left Columns -->
    <div class="xl:col-span-3 space-y-6">

      <!-- Job Overview -->
      <div class="bg-white border border-gray-200 rounded-xl dark:bg-dark-card dark:border-dark-border">
        <div class="p-6 pb-4">
          <h2 class="text-card-title flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/>
              <path d="M14 2v4a2 2 0 0 0 2 2h4"/>
              <path d="M10 9H8"/>
              <path d="M16 13H8"/>
              <path d="M16 17H8"/>
            </svg>
            <span class="dark:text-dark-text">Job Overview</span>
          </h2>
        </div>
        <div class="px-6 pb-6">
          <div class="prose dark:prose-invert max-w-none">
            <p class="text-body-large leading-relaxed text-gray-900 dark:text-dark-text">{{ job.parsed_detailed.summary|default:job.description|default:"No description available." }}</p>
          </div>
        </div>
      </div>

      <!-- Company Information -->
      <div class="bg-white border border-gray-200 rounded-xl dark:bg-dark-card dark:border-dark-border">
        <div class="p-6 pb-4">
          <h2 class="text-card-title flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"/>
            </svg>
            <span class="dark:text-dark-text">About {{ job.parsed_detailed.company.name|default:"the Company" }}</span>
          </h2>
        </div>
        <div class="px-6 pb-6">
          <div class="space-y-4">
            <div class="prose dark:prose-invert max-w-none">
              <p class="text-sm leading-relaxed dark:text-dark-text">{{ job.parsed_detailed.company.about|default:"Company information not available." }}</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 pt-4 border-t border-gray-200 dark:border-dark-border">
              {% if job.parsed_detailed.company.industry %}
                <div class="space-y-2">
                  <h4 class="text-caption text-gray-500 dark:text-gray-400">Industry</h4>
                  <span class="px-2 py-1 text-sm font-medium rounded border border-gray-300 bg-gray-50 dark:border-dark-border dark:bg-dark-hover dark:text-dark-text">
                    {{ job.parsed_detailed.company.industry }}
                  </span>
                </div>
              {% endif %}
              {% if job.parsed_detailed.company.size %}
                <div class="space-y-2">
                  <h4 class="text-caption text-gray-500 dark:text-gray-400">Company Size</h4>
                  <div class="flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500 dark:text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                      <circle cx="9" cy="7" r="4"/>
                      <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                      <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                    </svg>
                    <span class="text-sm font-medium dark:text-dark-text">{{ job.parsed_detailed.company.size }}</span>
                  </div>
                </div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>

      <!-- Key Responsibilities -->
      <div class="bg-white border border-gray-200 rounded-xl dark:bg-dark-card dark:border-dark-border">
        <div class="p-6 pb-4">
          <h2 class="text-card-title flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 12l2 2 4-4"/>
              <path d="M21 12c-1 0-3-1-3-3s2-3 3-3 3 1 3 3-2 3-3 3"/>
              <path d="M3 12c1 0 3-1 3-3s-2-3-3-3-3 1-3 3 2 3 3 3"/>
              <path d="M13 12h3a2 2 0 0 1 2 2v1"/>
              <path d="M13 12H9a2 2 0 0 0-2 2v1"/>
            </svg>
            <span class="dark:text-dark-text">Key Responsibilities</span>
          </h2>
        </div>
        <div class="px-6 pb-6">
          <div class="space-y-3">
            {% for responsibility in job.parsed_detailed.responsibilities %}
              <div class="flex items-start gap-3 group">
                <div class="h-2 w-2 rounded-full bg-blue-600 mt-2 flex-shrink-0 group-hover:scale-125 transition-transform"></div>
                <span class="text-sm leading-relaxed group-hover:text-gray-900 transition-colors dark:text-dark-text dark:group-hover:text-dark-text">
                  {{ responsibility }}
                </span>
              </div>
            {% empty %}
              <p class="text-sm text-gray-500 dark:text-gray-400">No specific responsibilities listed.</p>
            {% endfor %}
          </div>
        </div>
      </div>

      <!-- Enhanced Required Skills -->
      <div class="bg-white border border-gray-200 rounded-xl dark:bg-dark-card dark:border-dark-border">
        <div class="p-6 pb-4">
          <div class="flex items-center justify-between">
            <h2 class="text-card-title flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"/>
              </svg>
              <span class="dark:text-dark-text">Required Skills</span>
            </h2>
            <span class="px-2 py-1 text-xs font-medium rounded border border-gray-300 dark:border-dark-border dark:text-dark-text dark:bg-dark-hover">
              {{ job.parsed_detailed.required_skills|length }} skills
            </span>
          </div>
        </div>
        <div class="px-6 pb-6">
          <div class="grid gap-4">
            {% for skill in job.parsed_detailed.required_skills %}
              <div class="group hover-elevate border rounded-lg p-4 transition-all dark:border-dark-border dark:bg-dark-card/50">
                <div class="flex items-start justify-between mb-3">
                  <div class="flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 fill-current text-yellow-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"/>
                    </svg>
                    <h4 class="font-medium text-sm group-hover:text-blue-600 transition-colors dark:text-dark-text">
                      {{ skill.name }}
                    </h4>
                  </div>
                  <span class="px-2 py-1 text-xs font-medium rounded border bg-destructive/10 text-destructive border-destructive/20 dark:bg-red-900 dark:text-red-300 dark:border-red-700">
                    must have
                  </span>
                </div>

                <!-- Priority Indicator -->
                <div class="mb-3">
                  <div class="flex items-center justify-between text-xs mb-1">
                    <span class="text-gray-500 dark:text-gray-400">Priority Level</span>
                    <span class="text-destructive dark:text-red-400">100%</span>
                  </div>
                  <div class="progress-bar">
                    <div class="progress-fill" style="width: 100%"></div>
                  </div>
                </div>

                {% if skill.notes %}
                  <p class="text-xs text-gray-500 leading-relaxed dark:text-gray-400">
                    {{ skill.notes }}
                  </p>
                {% endif %}
              </div>
            {% empty %}
              <p class="text-sm text-gray-500 dark:text-gray-400">No required skills listed.</p>
            {% endfor %}
          </div>
        </div>
      </div>

      <!-- Preferred Skills -->
      {% if job.parsed_detailed.preferred_skills %}
        <div class="bg-white border border-gray-200 rounded-xl dark:bg-dark-card dark:border-dark-border">
          <div class="p-6 pb-4">
            <div class="flex items-center justify-between">
              <h2 class="text-card-title flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M8 12l2 2 4-4"/>
                </svg>
                <span class="dark:text-dark-text">Preferred Skills</span>
              </h2>
              <span class="px-2 py-1 text-xs font-medium rounded border border-gray-300 dark:border-dark-border dark:text-dark-text dark:bg-dark-hover">
                {{ job.parsed_detailed.preferred_skills|length }} bonus skills
              </span>
            </div>
          </div>
          <div class="px-6 pb-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
              {% for skill in job.parsed_detailed.preferred_skills %}
                <div class="group hover-elevate border rounded-lg p-3 transition-all dark:border-dark-border dark:bg-dark-card/50">
                  <div class="flex items-center justify-between mb-2">
                    <div class="flex items-center gap-2">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 text-gray-500 dark:text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M8 12l2 2 4-4"/>
                      </svg>
                      <span class="font-medium text-sm group-hover:text-blue-600 transition-colors dark:text-dark-text">
                        {{ skill.name }}
                      </span>
                    </div>
                    <span class="px-2 py-1 text-xs font-medium rounded border bg-info/10 text-info border-info/20 dark:bg-blue-900 dark:text-blue-300 dark:border-blue-700">
                      nice to have
                    </span>
                  </div>
                  {% if skill.notes %}
                    <p class="text-xs text-gray-500 leading-relaxed dark:text-gray-400">
                      {{ skill.notes }}
                    </p>
                  {% endif %}
                </div>
              {% endfor %}
            </div>
          </div>
        </div>
      {% endif %}

      <!-- Enhanced Required Tools -->
      <div class="bg-white border border-gray-200 rounded-xl dark:bg-dark-card dark:border-dark-border">
        <div class="p-6 pb-4">
          <div class="flex items-center justify-between">
            <h2 class="text-card-title flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
              </svg>
              <span class="dark:text-dark-text">Required Tools & Software</span>
            </h2>
            <span class="px-2 py-1 text-xs font-medium rounded border border-gray-300 dark:border-dark-border dark:text-dark-text dark:bg-dark-hover">
              {{ job.parsed_detailed.required_tools|length }} tools
            </span>
          </div>
        </div>
        <div class="px-6 pb-6">
          <div class="flex flex-wrap gap-2">
            {% for tool in job.parsed_detailed.required_tools %}
              <span class="px-3 py-1 text-sm font-medium rounded border border-gray-300 bg-gray-50 hover-elevate cursor-default dark:border-dark-border dark:bg-dark-hover dark:text-dark-text">
                {{ tool.name }}
              </span>
            {% empty %}
              <p class="text-sm text-gray-500 dark:text-gray-400">No specific tools required.</p>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>

    <!-- Enhanced Right Sidebar -->
    <div class="space-y-6">

      <!-- Quick Actions -->
      <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200 dark:from-dark-card dark:to-dark-card dark:border-dark-border">
        <div class="p-4 text-center space-y-3">
          <h3 class="font-semibold text-sm dark:text-dark-text">Interested in this role?</h3>
          <div class="space-y-2">
            <a href="{% url 'hiring:analysis' %}" class="w-full inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors">
              Create Job Fit Report
              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m9 18 6-6-6-6"/>
              </svg>
            </a>
            <button class="w-full inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors dark:border-dark-border dark:text-dark-text dark:bg-dark-card dark:hover:bg-dark-hover">
              Save for Later
            </button>
          </div>
        </div>
      </div>

      <!-- Location & Work Details -->
      <div class="bg-white border border-gray-200 rounded-xl dark:bg-dark-card dark:border-dark-border">
        <div class="p-6 pb-4">
          <h3 class="text-sm font-semibold flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"/>
              <circle cx="12" cy="10" r="3"/>
            </svg>
            <span class="dark:text-dark-text">Location & Work Details</span>
          </h3>
        </div>
        <div class="px-6 pb-6 space-y-4">
          <div>
            <h4 class="text-caption text-gray-500 mb-2 dark:text-gray-400">Work Location</h4>
            <div class="flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-500 dark:text-gray-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 3h18v14H3z"/>
                <path d="M8 21h8"/>
                <path d="M12 17v4"/>
              </svg>
              <span class="text-sm font-medium dark:text-dark-text">
                {% with loc=job.parsed_detailed.location_requirements %}
                  {{ loc.city }}, {{ loc.country }}
                {% endwith %}
              </span>
            </div>
          </div>

          <div class="border-t border-gray-200 pt-4 dark:border-dark-border">
            <h4 class="text-caption text-gray-500 mb-2 dark:text-gray-400">Work Type</h4>
            <span class="px-2 py-1 text-sm font-medium rounded border border-gray-300 capitalize dark:border-dark-border dark:text-dark-text dark:bg-dark-hover">
              {{ job.parsed_detailed.work_location_type|default:"On-site" }}
            </span>
          </div>

          {% with loc=job.parsed_detailed.location_requirements %}
            {% if loc.travel_percentage %}
              <div class="border-t border-gray-200 pt-4 dark:border-dark-border">
                <h4 class="text-caption text-gray-500 mb-2 dark:text-gray-400">Travel Required</h4>
                <div class="flex items-center gap-2">
                  <div class="flex-1">
                    <div class="progress-bar">
                      <div class="progress-fill" data-width="{{ loc.travel_percentage|floatformat:0 }}"></div>
                    </div>
                  </div>
                  <span class="text-sm font-medium dark:text-dark-text">
                    {{ loc.travel_percentage }}%
                  </span>
                </div>
              </div>
            {% endif %}
          {% endwith %}
        </div>
      </div>

      <!-- Experience Requirements -->
      <div class="bg-white border border-gray-200 rounded-xl dark:bg-dark-card dark:border-dark-border">
        <div class="p-6 pb-4">
          <h3 class="text-sm font-semibold flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
            <span class="dark:text-dark-text">Experience Requirements</span>
          </h3>
        </div>
        <div class="px-6 pb-6 space-y-4">
          {% with exp=job.parsed_detailed.experience %}
            {% if exp.min_years_total %}
              <div>
                <h4 class="text-caption text-gray-500 mb-2 dark:text-gray-400">Minimum Experience</h4>
                <div class="flex items-center gap-2">
                  <div class="h-2 w-2 rounded-full bg-red-500"></div>
                  <span class="text-sm font-medium dark:text-dark-text">{{ exp.min_years_total }} years</span>
                </div>
              </div>
            {% endif %}

            {% if exp.preferred_years_total %}
              <div class="border-t border-gray-200 pt-4 dark:border-dark-border">
                <h4 class="text-caption text-gray-500 mb-2 dark:text-gray-400">Preferred Experience</h4>
                <div class="flex items-center gap-2">
                  <div class="h-2 w-2 rounded-full bg-green-500"></div>
                  <span class="text-sm font-medium dark:text-dark-text">{{ exp.preferred_years_total }} years</span>
                </div>
              </div>
            {% endif %}

            {% if exp.role_keywords %}
              <div class="border-t border-gray-200 pt-4 dark:border-dark-border">
                <h4 class="text-caption text-gray-500 mb-2 dark:text-gray-400">Role Keywords</h4>
                <div class="flex flex-wrap gap-1">
                  {% for keyword in exp.role_keywords %}
                    <span class="px-2 py-1 text-xs font-medium rounded border border-gray-300 dark:border-dark-border dark:text-dark-text dark:bg-dark-hover">
                      {{ keyword }}
                    </span>
                  {% endfor %}
                </div>
              </div>
            {% endif %}
          {% endwith %}
        </div>
      </div>

      <!-- Education Requirements -->
      <div class="bg-white border border-gray-200 rounded-xl dark:bg-dark-card dark:border-dark-border">
        <div class="p-6 pb-4">
          <h3 class="text-sm font-semibold flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
              <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
            </svg>
            <span class="dark:text-dark-text">Education Requirements</span>
          </h3>
        </div>
        <div class="px-6 pb-6 space-y-4">
          {% with edu=job.parsed_detailed.education %}
            {% if edu.levels %}
              <div>
                <h4 class="text-caption text-gray-500 mb-2 dark:text-gray-400">Education Level</h4>
                <div class="flex flex-wrap gap-1">
                  {% for level in edu.levels %}
                    <span class="px-2 py-1 text-xs font-medium rounded border border-gray-300 bg-gray-50 capitalize dark:border-dark-border dark:bg-dark-hover dark:text-dark-text">
                      {{ level }}
                    </span>
                  {% endfor %}
                </div>
              </div>
            {% endif %}

            {% if edu.fields_of_study %}
              <div class="border-t border-gray-200 pt-4 dark:border-dark-border">
                <h4 class="text-caption text-gray-500 mb-2 dark:text-gray-400">Field of Study</h4>
                <div class="flex flex-wrap gap-1">
                  {% for field in edu.fields_of_study %}
                    <span class="px-2 py-1 text-xs font-medium rounded border border-gray-300 dark:border-dark-border dark:text-dark-text dark:bg-dark-hover">
                      {{ field }}
                    </span>
                  {% endfor %}
                </div>
              </div>
            {% endif %}
          {% endwith %}
        </div>
      </div>

      <!-- Compensation & Benefits -->
      <div class="bg-white border border-gray-200 rounded-xl dark:bg-dark-card dark:border-dark-border">
        <div class="p-6 pb-4">
          <h3 class="text-sm font-semibold flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="12" x2="12" y1="2" y2="22"/>
              <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
            </svg>
            <span class="dark:text-dark-text">Compensation & Benefits</span>
          </h3>
        </div>
        <div class="px-6 pb-6 space-y-4">
          {% with comp=job.parsed_detailed.compensation %}
            {% if comp.bonus %}
              <div>
                <h4 class="text-caption text-gray-500 mb-2 dark:text-gray-400">Bonus Structure</h4>
                <p class="text-sm dark:text-dark-text">{{ comp.bonus }}</p>
              </div>
            {% endif %}

            {% if comp.benefits %}
              <div class="border-t border-gray-200 pt-4 dark:border-dark-border">
                <h4 class="text-caption text-gray-500 mb-2 dark:text-gray-400">Benefits Package</h4>
                <div class="space-y-2">
                  {% for benefit in comp.benefits %}
                    <div class="flex items-start gap-2">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3 text-green-500 mt-0.5 flex-shrink-0" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 12l2 2 4-4"/>
                        <path d="M21 12c-1 0-3-1-3-3s2-3 3-3 3 1 3 3-2 3-3 3"/>
                        <path d="M3 12c1 0 3-1 3-3s-2-3-3-3-3 1-3 3 2 3 3 3"/>
                        <path d="M13 12h3a2 2 0 0 1 2 2v1"/>
                        <path d="M13 12H9a2 2 0 0 0-2 2v1"/>
                      </svg>
                      <span class="text-xs leading-relaxed dark:text-dark-text">{{ benefit }}</span>
                    </div>
                  {% endfor %}
                </div>
              </div>
            {% endif %}
          {% endwith %}
        </div>
      </div>

      <!-- Enhanced Data Quality -->
      <div class="bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border border-gray-200 dark:from-dark-card dark:to-dark-card dark:border-dark-border">
        <div class="p-6 pb-4">
          <h3 class="text-sm font-semibold flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
            </svg>
            <span class="dark:text-dark-text">Data Quality Score</span>
          </h3>
        </div>
        <div class="px-6 pb-6 text-center space-y-3">
          <div class="relative">
            <div class="text-3xl font-bold text-blue-600">
              95%
            </div>
            <p class="text-xs text-gray-500 dark:text-gray-400">Parsing Confidence</p>
          </div>

          <div class="space-y-2">
            <div class="progress-bar">
              <div class="progress-fill" style="width: 95%"></div>
            </div>
            <p class="text-xs font-medium text-success dark:text-green-300">
              Excellent data quality
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}